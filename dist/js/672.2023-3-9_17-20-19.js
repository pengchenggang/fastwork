"use strict";(self["webpackChunkfastwork"]=self["webpackChunkfastwork"]||[]).push([[672],{1672:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var o=function(){var e=this,t=e._self._c;return t("div",[t("compLayout",[t("h1",[e._v("Plopjs 微型脚手架")]),t("h2",{attrs:{id:"GS"}},[e._v("概述")]),t("ul",{staticClass:"list"},[t("li",[e._v("主要功能：创建页面模板文件")]),t("li",[e._v("plopjs 官网："),t("a",{attrs:{href:"https://plopjs.com/documentation/",target:"_blank"}},[e._v("https://plopjs.com/documentation/")])])]),t("h2",{attrs:{id:"AZYLK"}},[e._v("安装依赖库")]),t("c",[e._v("npm install --save-dev plop")]),e._v(" 先把库装上 "),t("h2",{attrs:{id:"PZWJ"}},[e._v("配置文件")]),t("p",[e._v("根目录创建 "),t("c",[e._v("plopfile.js")])],1),t("h3",[e._v("plopfile.js")]),t("codeIn",[t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[t("code",[e._v("export default function (plop) {\n  // 入口函数\n  plop.setGenerator('basics', {\n    description: '描述文字不显示在控制台',\n    prompts: [], // 这里是提问的问题\n    actions: [], // 这里是执行的函数\n  })\n};")])])]),t("h2",{attrs:{id:"ZXJB"}},[e._v("执行脚本")]),t("h3",[e._v("package.json")]),t("codeIn",[t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[t("code",[e._v('{\n    ...,\n    "scripts": {\n        "plop": "plop"\n    },\n    ...\n}')])])]),t("h2",{attrs:{id:"XGJBLX"}},[e._v("修改脚本类型")]),t("p",[e._v("如果不了解ESM,可以看我写的这篇文章 "),t("a",{attrs:{href:"https://www.cnblogs.com/pengchenggang/p/17037512.html",target:"_blank"}},[e._v("CommonJs VS ES Module")])]),t("h3",[e._v("package.json")]),t("codeIn",[t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[t("code",[e._v('{\n    ...,\n    "type": "module",\n    ...\n}')])])]),t("blockquote",[t("p",[e._v("到这里我们已经可以通过 "),t("c",[e._v("npm run plop")]),e._v(" 跑通这个命令了，最小循环已完成，下面进行配置文件的扩展。")],1)]),t("h2",{attrs:{id:"PZWJDTW"}},[e._v("配置文件带提问")]),t("h3",[e._v("plopfile.js")]),t("codeIn",[t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[t("code",[e._v("export default function (plop) {\n    // controller generator\n    plop.setGenerator('controller', {\n        description: 'application controller logic',\n        prompts: [{\n            type: 'input',\n            name: 'name',\n            message: 'controller name please'\n        }],\n        actions: [{\n            type: 'add',\n            path: 'src/{_{ name }_}.js', // 请忽略下划线\n            templateFile: 'plop-templates/controller.hbs'\n        }]\n    });\n};")])])]),t("ul",{staticClass:"list"},[t("li",[t("p",[e._v("执行 "),t("c",[e._v("npm run plop")]),e._v(" 查看下效果")],1)]),t("li",[e._v("报错 发现找不到 "),t("c",[e._v("plop-templates/controller.hbs")]),e._v(" 文件")],1)]),t("h2",{attrs:{id:"CJMBWJ"}},[e._v("创建模板文件")]),t("ul",{staticClass:"list"},[t("li",[e._v("先在根目录创建 "),t("c",[e._v("plop-templates")]),e._v(" 目录")],1),t("li",[e._v("再在里面创建 "),t("c",[e._v("controller.hbs")]),e._v(" 文件")],1),t("li",[e._v("执行 "),t("c",[e._v("npm run plop")]),e._v(" 输入name, 然后会在src的目录下生成指定的文件")],1)]),t("h2",{attrs:{id:"HFcommonjs"}},[e._v("恢复commonjs")]),t("ul",{staticClass:"list"},[t("li",[e._v("package.json中 如果不写type, 默认是commonjs。")]),t("li",[t("c",[e._v('"type": "commonjs"')])],1),t("li",[e._v("之前我们改为了 "),t("c",[e._v('"type": "module",')]),e._v(", 现在我们恢复回来")],1),t("li",[e._v("为什么恢复？因为我用的vue cli,之前的代码都用的commonjs,我懒的改了")])]),t("blockquote",[t("p",[e._v("删除 package.json 中的 "),t("c",[e._v('"type": "module",')])],1)]),t("h3",[e._v("plopfile.js")]),t("codeIn",[t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[t("code",[e._v("module.exports = function (plop) {\n  // controller generator\n  plop.setGenerator('controller', {\n    description: 'application controller logic',\n    prompts: [{\n      type: 'input',\n      name: 'name',\n      message: 'controller name please'\n    }],\n    actions: [{\n      type: 'add',\n      path: 'src/{_{name}_}.vue', // 忽略下划线\n      templateFile: 'plop-templates/controller.hbs'\n    }]\n  })\n}")])])]),t("h2",{attrs:{id:"DTAction"}},[e._v("动态Action")]),t("p",[e._v("需求：执行不同的动作")]),t("h3",[e._v("plopfile.js")]),t("codeIn",[t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[t("code",[e._v("module.exports = function (plop) {\n  plop.setGenerator('fc_page', {\n    description: 'application fc_page logic',\n    prompts: [{\n      type: 'confirm',\n      name: 'needLess',\n      message: '是否需要样式文件（默认需要）',\n      default:true,\n    }],\n    actions(data) {\n      if (data.needLess) {\n        return [];\n      }\n      return [];\n    },\n  });\n};")])])]),t("h2",{attrs:{id:"DGsetGenerator"}},[e._v("多个setGenerator")]),t("ul",{staticClass:"list"},[t("li",[e._v("需求：有多个命令的时候，设置多个生成器")]),t("li",[e._v("可以使用 "),t("c",[e._v("npm run plop [name]")]),e._v(" 执行相应的命令")],1),t("li",[e._v("如果不输入[name]会出来个列表，进行选择")])]),t("h3",[e._v("plopfile.js")]),t("codeIn",[t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[t("code",[e._v("const viewGenerator = require('./plop-templates/view/prompt')\nconst componentGenerator = require('./plop-templates/component/prompt')\nconst storeGenerator = require('./plop-templates/store/prompt.js')\n\nmodule.exports = function(plop) {\n  plop.setGenerator('view', viewGenerator)\n  plop.setGenerator('component', componentGenerator)\n  plop.setGenerator('store', storeGenerator)\n}")])])]),t("h2",{attrs:{id:"Handlebars"}},[e._v("Handlebars模板语言")]),t("ul",{staticClass:"list"},[t("li",[e._v("需求：模板里面的需要有替换的变量")]),t("li",[e._v("Handlebars官网："),t("a",{attrs:{href:"https://handlebarsjs.com/zh/guide/",target:"_blank"}},[e._v("https://handlebarsjs.com/zh/guide/")])])]),t("h3",[e._v("plop-templates/controller.hbs")]),t("codeIn",[t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[t("code",[t("div",[e._v("\n{_{name}_} // 忽略下划线\n  ")]),e._v("\n")])])]),t("blockquote",[t("p",[e._v("这样生成的文件里面的变量就被替换了")])]),t("h2",{attrs:{id:"TJYMGNFX"}},[e._v("添加页面功能分析")]),t("ul",{staticClass:"list"},[t("li",[e._v("在src/views/components下建立页面目录 名字为 变量name")]),t("li",[e._v("将模板文件copy到刚才的目录下文件名为 [name].vue")]),t("li",[e._v("模板文件相应id替换成name的名字")]),t("li",[e._v("将页面的路由添加上 重点就是添加路由")])]),t("h3",[e._v("创建目录和文件的action这么写")]),t("codeIn",[t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[t("code",[e._v("actions: [\n  {\n    type: 'add', // 代表添加文件\n    path: 'src/components/{_{name}_}/{_{name}_}.vue', // 这里的name就是上面定义的键 忽略下划线\n    templateFile: 'plop-templates/component.hbs'\n  }\n]\n")])])]),t("h3",[e._v("修改路由的代码")]),t("codeIn",[t("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[t("code",[e._v("actions: [{\n      type: 'modify',\n      path: 'src/router/index.js',\n      pattern: /\\/\\/ ---ROUTER_IMPORT---/g,\n      template: `{path: '${path}', name: '/main/${path}', component: () => import('src/components/main/${filePath}/${path}')},\n       // ---ROUTER_IMPORT---` // 这个是查找文件插入位置的标识\n")])])]),t("p",[e._v("代码来源："),t("a",{attrs:{href:"https://blog.csdn.net/gaoyan666/article/details/110480430",target:"_blank"}},[e._v("link")])])],1)],1)},a=[],p={name:"plopjs",props:{},components:{},data(){return{}},watch:{},computed:{},methods:{},created(){},activated(){},mounted(){},beforeDestroy(){}},l=p,r=n(1001),s=(0,r.Z)(l,o,a,!1,null,null,null),i=s.exports}}]);