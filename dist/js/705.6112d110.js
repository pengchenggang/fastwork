"use strict";(self["webpackChunkfastwork"]=self["webpackChunkfastwork"]||[]).push([[705],{7705:function(t,n,e){e.r(n),e.d(n,{default:function(){return h}});var c=function(){var t=this,n=t._self._c;return n("div",[n("compLayout",[n("div",{attrs:{slot:"anchor"},slot:"anchor"},[n("anchorZen",{attrs:{links:["概述,GS","安装方法,AZFF","使用方法,SYFF","ctx 上下文,CTX","next,NEXT","ctx.nextJump,NEXTJUMP","ctx.goto,GOTO","ctx.ifTo,IFTO","源代码,YDM","结语,JY"]}})],1),n("div",{attrs:{slot:"content"},slot:"content"},[n("h1",[t._v("getAc 异步执行函数队列")]),n("blockquote",[n("p",[t._v("时间：20230306")]),n("p",[t._v("作者：彭成刚")])]),n("h2",{attrs:{id:"GS"}},[t._v("概述")]),n("ul",[n("li",[t._v("环境: vue2")]),n("li",[t._v("解决: 同步代码与异步代码的回调问题")]),n("li",[t._v("具体: 顺序执行 this.$api")])]),n("h2",{attrs:{id:"AZFF"}},[t._v("安装方法")]),n("ol",[n("li",[t._v("将 asyncTool.js 放入到 /src/libs/asyncTool.js")]),n("li",[t._v("main.js 添加如下代码")])]),n("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[n("code",[t._v("import AsyncTool from '@/libs/asyncTool'\nVue.prototype.$getAc = () => {\n  return new AsyncTool()\n}")])]),n("h2",{attrs:{id:"SYFF"}},[t._v("使用方法")]),n("b",[t._v("方式1: 加载函数")]),n("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[n("code",[t._v("const ac = this.$getAc()\nac.use(this.yourFunction) // yourFunction (ctx, next)\nac.run()")])]),n("b",[t._v("方式2: 内嵌函数")]),n("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[n("code",[t._v("const ac = this.$getAc()\nac.use((ctx, next) => {\n  // your code\n  next()\n})\nac.run()")])]),n("b",[t._v("方式3: 内嵌简单函数")]),n("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[n("code",[t._v("const ac = this.$getAc()\nac.use(next => {\n  // your code\n  next()\n})\nac.run()")])]),n("b",[t._v("方式4: Last函数")]),n("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[n("code",[t._v("const ac = this.$getAc()\nac.run(() => {\n  // your last code\n})")])]),n("h2",{attrs:{id:"CTX"}},[t._v("ctx 上下文")]),n("p",[t._v("这个实例ac的全局对象，一般将此次业务的参数或结果存入里面")]),n("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[n("code",[t._v("const ac = this.$getAc()\nac.ctx.yourParamA = 'ok'\nac.use((ctx, next) => {\n  console.info(ctx.yourParamA) // ok\n})\nac.run()")])]),n("h2",{attrs:{id:"NEXT"}},[t._v("next")]),n("p",[t._v("next() 将执行下一个队列函数，并将ctx传递下去")]),n("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[n("code",[t._v("const ac = this.$getAc()\nac.use((ctx, next) => {\n  ctx.a = 'ok'\n  next() // 这里就执行到了下一个函数\n})\nac.use((ctx, next) => {\n  console.info(ctx.a) // ok\n  next()\n})\nac.run()")])]),n("h2",{attrs:{id:"NEXTJUMP"}},[t._v("ctx.nextJump")]),n("p",[t._v("ctx.nextJump() 将执行下下一个队列函数，并将ctx传递下去")]),n("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[n("code",[t._v("const ac = this.$getAc()\nac.use((ctx, next) => {\n  ctx.a = 'ok'\n  ctx.nextJump() // 跳过下个函数执行\n})\nac.use((ctx, next) => {\n  console.info('我没有被执行')\n  next()\n})\nac.use((ctx, next) => {\n  console.info(ctx.a) // ok\n  next()\n})\nac.run()")])]),n("h2",{attrs:{id:"GOTO"}},[t._v("ctx.goto")]),n("p",[t._v("ctx.goto('functionName') 将执行指定函数，并将ctx传递下去")]),n("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[n("code",[t._v("const ac = this.$getAc()\nac.use((ctx, next) => {\n  ctx.goto('havaNameFunctionRef') // 跳转到指定名称的函数\n})\nac.use(this.havaNameFunction, { ref: 'havaNameFunctionRef' })\nac.run()")])]),n("h2",{attrs:{id:"IFTO"}},[t._v("ctx.ifTo")]),n("p",[t._v("ctx.ifTo(boolValue, next) 根据boolValue 判断是否进入next")]),n("pre",{directives:[{name:"highlight",rawName:"v-highlight"}]},[n("code",[t._v("const ac = this.$getAc()\n  ac.ctx.yourCheck = true\nac.use((ctx, next) => {\n  if (ctx.ifTo(!ctx.yourCheck, next)) return\n  // your code\n})\nac.use(next => {\n  console.info('I am next function')\n})\nac.run()")])]),n("h2",{attrs:{id:"YDM"}},[t._v("源代码")]),n("codeZen",{attrs:{url:"src/libs/asyncTool.js",codeClass:"language-javascript"}}),n("h2",{attrs:{id:"JY"}},[t._v("结语")]),n("p",[t._v("此套代码灵感来源KOA 2023 Year written")])],1)])],1)},a=[],o={name:"getAc",props:{},components:{},data(){return{}},watch:{},computed:{},methods:{getCode1(){const t='\n<h1 title="kk">\nkkk\n</h1>\n';return t.trim()}},created(){},activated(){},mounted(){},beforeDestroy(){}},i=o,r=e(1001),s=(0,r.Z)(i,c,a,!1,null,null,null),h=s.exports}}]);